Day 7 Exp 12

a)

--Before the program--

CREATE TABLE ACCT(ACCNO VARCHAR2(20),BALANCE REAL);
INSERT INTO ACCT VALUES('u1903183',1000);
INSERT INTO ACCT VALUES('u1903184',5400);
INSERT INTO ACCT VALUES('u1903186',510);
INSERT INTO ACCT VALUES('u1903187',141);
SET SERVEROUTPUT ON

--Program--

DECLARE
    UACCNO VARCHAR2(20);
    MINBAL REAL;      UBAL REAL;
    exp EXCEPTION;
  
BEGIN
  
    MINBAL:=500;
    UACCNO:='&UACCNO';
    SELECT BALANCE INTO UBAL
    FROM ACCT
    WHERE ACCNO=UACCNO;

    IF UBAL>=MINBAL THEN
        DBMS_OUTPUT.PUT_LINE('BALANCE OK!');
    ELSE
        RAISE exp;
    END IF;
   
EXCEPTION
    WHEN exp THEN
        DBMS_OUTPUT.PUT_LINE('LESS THAN MINIMUM BALANCE! EXCEPTION HANDLED!');
        UBAL:=UBAL-100;
        UPDATE ACCT
        SET BALANCE=UBAL
        WHERE ACCNO=UACCNO;
   
END;
/

--After program--

SQL> SELECT * FROM ACCT;